{"ast":null,"code":"import { signInWithEmailAndPassword } from 'firebase/auth';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db, auth } from '../../firebase';\nconst DEFAULT_USER = {\n  uid: null,\n  email: null\n};\nconst AuthModule = {\n  state: {\n    user: DEFAULT_USER,\n    isLogIn: false\n  },\n  mutations: {\n    setLogIn(state) {\n      state.isLogIn = true;\n    },\n    setUser(state, payload) {\n      state.user = {\n        ...state.user,\n        ...payload\n      };\n      state.auth = true;\n    }\n  },\n  actions: {\n    async getUserProfile({\n      commit\n    }, payload) {\n      try {\n        const docSnap = await getDoc(doc(db, 'users', payload));\n        if (docSnap.exists()) {\n          return docSnap.data();\n        } else {\n          return null;\n        }\n      } catch (error) {\n        msgError(commit);\n        console.log(error);\n      }\n    },\n    async signIn({\n      commit,\n      dispatch\n    }, payload) {\n      try {\n        const userCredential = await signInWithEmailAndPassword(auth, payload.email, payload.password);\n        const userData = await dispatch('getUserProfile', userCredential.user.uid);\n        commit('setUser', userData);\n        commit('setLogIn');\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  },\n  getters: {\n    isLogIn: state => state.isLogIn,\n    user: state => state.user,\n    userId: state => state.userId\n  }\n};\nexport default AuthModule;","map":{"version":3,"names":["signInWithEmailAndPassword","doc","getDoc","db","auth","DEFAULT_USER","uid","email","AuthModule","state","user","isLogIn","mutations","setLogIn","setUser","payload","actions","getUserProfile","commit","docSnap","exists","data","error","msgError","console","log","signIn","dispatch","userCredential","password","userData","getters","userId"],"sources":["C:/Users/Ball/OneDrive/Documents/Web dev/own-website/src/Store/auth/index.js"],"sourcesContent":["import { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport { db, auth } from '../../firebase';\r\n\r\nconst DEFAULT_USER = {\r\n    uid: null,\r\n    email: null,\r\n}\r\n\r\nconst AuthModule = {\r\n    state:{ \r\n        user: DEFAULT_USER,\r\n        isLogIn: false,\r\n    },\r\n    mutations:{\r\n        setLogIn(state){\r\n            state.isLogIn = true;\r\n        },\r\n        setUser(state, payload){\r\n            state.user = {\r\n                ...state.user,\r\n                ...payload\r\n            }\r\n            state.auth = true\r\n        },\r\n    },\r\n    actions:{\r\n        async getUserProfile({commit},payload){\r\n            try{\r\n                const docSnap = await getDoc(doc(db,'users',payload));\r\n\r\n                if(docSnap.exists()){\r\n                    return docSnap.data();\r\n                } else {\r\n                    return null\r\n                }\r\n            } catch(error){\r\n                msgError(commit);\r\n                console.log(error)\r\n            }\r\n        },\r\n        async signIn({ commit, dispatch }, payload){\r\n            try {\r\n                const userCredential = await signInWithEmailAndPassword(\r\n                    auth, \r\n                    payload.email, \r\n                    payload.password\r\n                );\r\n                const userData = await dispatch('getUserProfile', userCredential.user.uid)\r\n                commit('setUser', userData)\r\n                commit('setLogIn')\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        },\r\n    },\r\n    getters:{\r\n        isLogIn: (state)=> state.isLogIn,\r\n        user: (state) => state.user,\r\n        userId: (state) => state.userId\r\n    }\r\n}\r\n\r\nexport default AuthModule;"],"mappings":"AAAA,SAASA,0BAA0B,QAAQ,eAAe;AAC1D,SAASC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,SAASC,EAAE,EAAEC,IAAI,QAAQ,gBAAgB;AAEzC,MAAMC,YAAY,GAAG;EACjBC,GAAG,EAAE,IAAI;EACTC,KAAK,EAAE;AACX,CAAC;AAED,MAAMC,UAAU,GAAG;EACfC,KAAK,EAAC;IACFC,IAAI,EAAEL,YAAY;IAClBM,OAAO,EAAE;EACb,CAAC;EACDC,SAAS,EAAC;IACNC,QAAQA,CAACJ,KAAK,EAAC;MACXA,KAAK,CAACE,OAAO,GAAG,IAAI;IACxB,CAAC;IACDG,OAAOA,CAACL,KAAK,EAAEM,OAAO,EAAC;MACnBN,KAAK,CAACC,IAAI,GAAG;QACT,GAAGD,KAAK,CAACC,IAAI;QACb,GAAGK;MACP,CAAC;MACDN,KAAK,CAACL,IAAI,GAAG,IAAI;IACrB;EACJ,CAAC;EACDY,OAAO,EAAC;IACJ,MAAMC,cAAcA,CAAC;MAACC;IAAM,CAAC,EAACH,OAAO,EAAC;MAClC,IAAG;QACC,MAAMI,OAAO,GAAG,MAAMjB,MAAM,CAACD,GAAG,CAACE,EAAE,EAAC,OAAO,EAACY,OAAO,CAAC,CAAC;QAErD,IAAGI,OAAO,CAACC,MAAM,EAAE,EAAC;UAChB,OAAOD,OAAO,CAACE,IAAI,EAAE;QACzB,CAAC,MAAM;UACH,OAAO,IAAI;QACf;MACJ,CAAC,CAAC,OAAMC,KAAK,EAAC;QACVC,QAAQ,CAACL,MAAM,CAAC;QAChBM,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;MACtB;IACJ,CAAC;IACD,MAAMI,MAAMA,CAAC;MAAER,MAAM;MAAES;IAAS,CAAC,EAAEZ,OAAO,EAAC;MACvC,IAAI;QACA,MAAMa,cAAc,GAAG,MAAM5B,0BAA0B,CACnDI,IAAI,EACJW,OAAO,CAACR,KAAK,EACbQ,OAAO,CAACc,QAAQ,CACnB;QACD,MAAMC,QAAQ,GAAG,MAAMH,QAAQ,CAAC,gBAAgB,EAAEC,cAAc,CAAClB,IAAI,CAACJ,GAAG,CAAC;QAC1EY,MAAM,CAAC,SAAS,EAAEY,QAAQ,CAAC;QAC3BZ,MAAM,CAAC,UAAU,CAAC;MACtB,CAAC,CAAC,OAAOI,KAAK,EAAE;QACZE,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;MACtB;IACJ;EACJ,CAAC;EACDS,OAAO,EAAC;IACJpB,OAAO,EAAGF,KAAK,IAAIA,KAAK,CAACE,OAAO;IAChCD,IAAI,EAAGD,KAAK,IAAKA,KAAK,CAACC,IAAI;IAC3BsB,MAAM,EAAGvB,KAAK,IAAKA,KAAK,CAACuB;EAC7B;AACJ,CAAC;AAED,eAAexB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}