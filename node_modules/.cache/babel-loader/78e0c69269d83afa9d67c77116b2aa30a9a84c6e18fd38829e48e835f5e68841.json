{"ast":null,"code":"import { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { createRouter, createWebHistory, START_LOCATION } from \"vue-router\";\nimport store from './Store';\nimport Home from './components/FrontPage/home.vue';\nimport Contact from './components/FrontPage/contact.vue';\nconst router = createRouter({\n  history: createWebHistory(),\n  routes: [{\n    path: '/',\n    component: Home,\n    name: 'home'\n  }, {\n    path: '/contact',\n    component: Contact,\n    name: 'contact',\n    meta: {\n      requiresAuth: true\n    }\n  }]\n});\nconst auth = getAuth();\nconst validateCheck = (to, from, next) => {\n  if (to.meta.requiresAuth && !store.getters['auth/isAuth']) {\n    next('/');\n  } else if (to.meta.requiresAuth && store.getters['auth/isAuth']) {\n    next('/contact');\n  } else {\n    next();\n  }\n};\nrouter.beforeEach((to, from, next) => {\n  if (from === START_LOCATION) {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      if (user) {\n        store.dispatch('auth/autosignin', {\n          uid: user.uid\n        }).then(() => {\n          validateCheck(to, from, next);\n        });\n      } else {\n        validateCheck(to, from, next);\n      }\n    });\n    unsubscribe();\n  } else {\n    validateCheck(to, from, next);\n  }\n});\nexport default router;","map":{"version":3,"names":["getAuth","onAuthStateChanged","createRouter","createWebHistory","START_LOCATION","store","Home","Contact","router","history","routes","path","component","name","meta","requiresAuth","auth","validateCheck","to","from","next","getters","beforeEach","unsubscribe","user","dispatch","uid","then"],"sources":["C:/Users/Ball/OneDrive/Documents/Web dev/own-website/src/routes.js"],"sourcesContent":["import { getAuth, onAuthStateChanged} from 'firebase/auth';\r\nimport { createRouter, createWebHistory, START_LOCATION } from \"vue-router\";\r\nimport store from './Store'\r\nimport Home from './components/FrontPage/home.vue'\r\nimport Contact from './components/FrontPage/contact.vue'\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      component: Home,\r\n      name: 'home',\r\n    },\r\n    { \r\n        path: '/contact', \r\n        component: Contact, \r\n        name: 'contact',\r\n        meta: { requiresAuth: true },\r\n      \r\n    }\r\n  ]\r\n});\r\n\r\nconst auth = getAuth();\r\n\r\nconst validateCheck = (to,from,next) => {\r\n    if( to.meta.requiresAuth && !store.getters['auth/isAuth']){\r\n        next('/');\r\n    } else if( to.meta.requiresAuth && store.getters['auth/isAuth']){\r\n        next('/contact');\r\n    } else{\r\n        next();\r\n    }\r\n}   \r\n\r\n\r\nrouter.beforeEach((to,from,next)=>{\r\n    if(from === START_LOCATION){\r\n        const unsubscribe = onAuthStateChanged(auth, user => {\r\n            if(user){\r\n                store.dispatch('auth/autosignin', { uid: user.uid }).then(() => {\r\n                    validateCheck(to, from, next);\r\n                });\r\n            } else {\r\n                validateCheck(to,from,next)\r\n            }\r\n        })\r\n        unsubscribe();\r\n    } else {\r\n        validateCheck(to,from,next)\r\n    }    \r\n})\r\n\r\nexport default router;\r\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,kBAAkB,QAAO,eAAe;AAC1D,SAASC,YAAY,EAAEC,gBAAgB,EAAEC,cAAc,QAAQ,YAAY;AAC3E,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,IAAI,MAAM,iCAAiC;AAClD,OAAOC,OAAO,MAAM,oCAAoC;AAExD,MAAMC,MAAM,GAAGN,YAAY,CAAC;EAC1BO,OAAO,EAAEN,gBAAgB,EAAE;EAC3BO,MAAM,EAAE,CACN;IACEC,IAAI,EAAE,GAAG;IACTC,SAAS,EAAEN,IAAI;IACfO,IAAI,EAAE;EACR,CAAC,EACD;IACIF,IAAI,EAAE,UAAU;IAChBC,SAAS,EAAEL,OAAO;IAClBM,IAAI,EAAE,SAAS;IACfC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAE/B,CAAC;AAEL,CAAC,CAAC;AAEF,MAAMC,IAAI,GAAGhB,OAAO,EAAE;AAEtB,MAAMiB,aAAa,GAAGA,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,KAAK;EACpC,IAAIF,EAAE,CAACJ,IAAI,CAACC,YAAY,IAAI,CAACV,KAAK,CAACgB,OAAO,CAAC,aAAa,CAAC,EAAC;IACtDD,IAAI,CAAC,GAAG,CAAC;EACb,CAAC,MAAM,IAAIF,EAAE,CAACJ,IAAI,CAACC,YAAY,IAAIV,KAAK,CAACgB,OAAO,CAAC,aAAa,CAAC,EAAC;IAC5DD,IAAI,CAAC,UAAU,CAAC;EACpB,CAAC,MAAK;IACFA,IAAI,EAAE;EACV;AACJ,CAAC;AAGDZ,MAAM,CAACc,UAAU,CAAC,CAACJ,EAAE,EAACC,IAAI,EAACC,IAAI,KAAG;EAC9B,IAAGD,IAAI,KAAKf,cAAc,EAAC;IACvB,MAAMmB,WAAW,GAAGtB,kBAAkB,CAACe,IAAI,EAAEQ,IAAI,IAAI;MACjD,IAAGA,IAAI,EAAC;QACJnB,KAAK,CAACoB,QAAQ,CAAC,iBAAiB,EAAE;UAAEC,GAAG,EAAEF,IAAI,CAACE;QAAI,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;UAC5DV,aAAa,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,CAAC;QACjC,CAAC,CAAC;MACN,CAAC,MAAM;QACHH,aAAa,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,CAAC;MAC/B;IACJ,CAAC,CAAC;IACFG,WAAW,EAAE;EACjB,CAAC,MAAM;IACHN,aAAa,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,CAAC;EAC/B;AACJ,CAAC,CAAC;AAEF,eAAeZ,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}