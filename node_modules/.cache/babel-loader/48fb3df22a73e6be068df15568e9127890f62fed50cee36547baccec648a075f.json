{"ast":null,"code":"import { collection, serverTimestamp, setDoc, doc } from 'firebase/firestore';\nimport { db } from '../../firebase';\nlet postCollection = collection(db, \"posts\");\nconst PostModule = {\n  state() {},\n  mutations: {\n    setFood(state, payload) {\n      state.food = payload;\n    },\n    setUserId(state, value) {\n      state.userId = value;\n    }\n  },\n  actions: {\n    async postFood({\n      commit,\n      rootGetters\n    }, payload) {\n      try {\n        const user = rootGetters['getUserData'];\n        const newArticle = doc(postCollection);\n        await setDoc(newArticle, {\n          timestamp: serverTimestamp(),\n          owner: {\n            uid: user.uid\n          },\n          ...payload\n        });\n        console.log(payload, 'Post added successfully');\n        // reset the food input field\n        this.food = '';\n        // update the food state in Vuex\n        commit('setFood', payload);\n      } catch (error) {\n        console.error('Error adding post: ', error);\n      }\n    }\n  }\n};\nexport default PostModule;","map":{"version":3,"names":["collection","serverTimestamp","setDoc","doc","db","postCollection","PostModule","state","mutations","setFood","payload","food","setUserId","value","userId","actions","postFood","commit","rootGetters","user","newArticle","timestamp","owner","uid","console","log","error"],"sources":["C:/Users/Ball/OneDrive/Documents/Web dev/own-website/Store/post/index.js"],"sourcesContent":["import { collection, serverTimestamp, setDoc, doc } from 'firebase/firestore';\r\nimport { db } from '../../firebase';\r\n\r\nlet postCollection = collection(db,\"posts\")\r\n\r\nconst PostModule = {\r\n    state(){ \r\n\r\n    },\r\n    mutations:{\r\n        setFood(state,payload){\r\n            state.food = payload\r\n        },\r\n        setUserId(state, value) {\r\n            state.userId = value\r\n        },\r\n    },\r\n    actions:{\r\n        async postFood({ commit, rootGetters }, payload) {\r\n            try {\r\n                const user = rootGetters['getUserData']\r\n                const newArticle = doc(postCollection)\r\n                await setDoc(newArticle,{\r\n                    timestamp: serverTimestamp(),\r\n                    owner: {\r\n                        uid: user.uid\r\n                    },\r\n                    ...payload\r\n                })\r\n                 console.log(payload, 'Post added successfully');\r\n                    // reset the food input field\r\n                    this.food = '';\r\n                        // update the food state in Vuex\r\n                    commit('setFood', payload );\r\n\r\n            } catch(error){\r\n                console.error('Error adding post: ', error);\r\n            }\r\n        },\r\n    }\r\n}\r\n\r\nexport default PostModule;"],"mappings":"AAAA,SAASA,UAAU,EAAEC,eAAe,EAAEC,MAAM,EAAEC,GAAG,QAAQ,oBAAoB;AAC7E,SAASC,EAAE,QAAQ,gBAAgB;AAEnC,IAAIC,cAAc,GAAGL,UAAU,CAACI,EAAE,EAAC,OAAO,CAAC;AAE3C,MAAME,UAAU,GAAG;EACfC,KAAKA,CAAA,EAAE,CAEP,CAAC;EACDC,SAAS,EAAC;IACNC,OAAOA,CAACF,KAAK,EAACG,OAAO,EAAC;MAClBH,KAAK,CAACI,IAAI,GAAGD,OAAO;IACxB,CAAC;IACDE,SAASA,CAACL,KAAK,EAAEM,KAAK,EAAE;MACpBN,KAAK,CAACO,MAAM,GAAGD,KAAK;IACxB;EACJ,CAAC;EACDE,OAAO,EAAC;IACJ,MAAMC,QAAQA,CAAC;MAAEC,MAAM;MAAEC;IAAY,CAAC,EAAER,OAAO,EAAE;MAC7C,IAAI;QACA,MAAMS,IAAI,GAAGD,WAAW,CAAC,aAAa,CAAC;QACvC,MAAME,UAAU,GAAGjB,GAAG,CAACE,cAAc,CAAC;QACtC,MAAMH,MAAM,CAACkB,UAAU,EAAC;UACpBC,SAAS,EAAEpB,eAAe,EAAE;UAC5BqB,KAAK,EAAE;YACHC,GAAG,EAAEJ,IAAI,CAACI;UACd,CAAC;UACD,GAAGb;QACP,CAAC,CAAC;QACDc,OAAO,CAACC,GAAG,CAACf,OAAO,EAAE,yBAAyB,CAAC;QAC5C;QACA,IAAI,CAACC,IAAI,GAAG,EAAE;QACV;QACJM,MAAM,CAAC,SAAS,EAAEP,OAAO,CAAE;MAEnC,CAAC,CAAC,OAAMgB,KAAK,EAAC;QACVF,OAAO,CAACE,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC/C;IACJ;EACJ;AACJ,CAAC;AAED,eAAepB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}