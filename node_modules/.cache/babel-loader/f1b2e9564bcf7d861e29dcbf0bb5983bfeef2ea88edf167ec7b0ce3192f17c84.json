{"ast":null,"code":"/* eslint-disable */\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { createRouter, createWebHistory, START_LOCATION } from \"vue-router\";\n//import store from './Store'\nimport Home from './components/FrontPage/home';\nimport Contact from './components/FrontPage/contact';\nimport Login from './components/User/signup';\nconst router = createRouter({\n  history: createWebHistory(),\n  routes: [{\n    path: '/login',\n    component: Login,\n    name: 'login'\n  }, {\n    path: '/',\n    component: Home,\n    name: 'home',\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/contact',\n    component: Contact,\n    name: 'contact',\n    meta: {\n      requiresAuth: true\n    }\n  }]\n});\nconst auth = getAuth();\nconst validateCheck = (to, from, next) => {\n  if (to.meta.home && !store.getters['auth/isAuth']) {\n    next('/login');\n  } else if (to.meta.signin && store.getters['auth/isAuth']) {\n    next('/');\n  } else {\n    next();\n  }\n};\nrouter.beforeEach((to, from, next) => {\n  if (from === START_LOCATION) {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      if (user) {\n        store.dispatch('auth/autosign', user).then(() => {\n          validateCheck(to, from, next);\n        });\n      } else {\n        validateCheck(to, from, next);\n      }\n    });\n    unsubscribe();\n  } else {\n    validateCheck(to, from, next);\n  }\n});\nexport default router;","map":{"version":3,"names":["getAuth","onAuthStateChanged","createRouter","createWebHistory","START_LOCATION","Home","Contact","Login","router","history","routes","path","component","name","meta","requiresAuth","auth","validateCheck","to","from","next","home","store","getters","signin","beforeEach","unsubscribe","user","dispatch","then"],"sources":["C:/Users/Ball/OneDrive/Documents/Web dev/own-website/src/routes.js"],"sourcesContent":["/* eslint-disable */ \r\nimport { getAuth, onAuthStateChanged} from 'firebase/auth';\r\nimport { createRouter, createWebHistory, START_LOCATION } from \"vue-router\";\r\n//import store from './Store'\r\nimport Home from './components/FrontPage/home'\r\nimport Contact from './components/FrontPage/contact'\r\nimport Login from './components/User/signup'\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes: [\r\n    {\r\n      path: '/login',\r\n      component: Login,\r\n      name: 'login'\r\n    },\r\n    {\r\n      path: '/',\r\n      component: Home,\r\n      name: 'home',\r\n      meta: { requiresAuth: true },\r\n    },\r\n    { \r\n      path: '/contact', \r\n      component: Contact, \r\n      name: 'contact',\r\n      meta: { requiresAuth: true },\r\n    }\r\n  ]\r\n});\r\n\r\nconst auth = getAuth();\r\n\r\nconst validateCheck = (to,from,next) => {\r\n    if( to.meta.home && !store.getters['auth/isAuth']){\r\n        next('/login');\r\n    } else if( to.meta.signin && store.getters['auth/isAuth']){\r\n        next('/');\r\n    } else{\r\n        next();\r\n    }\r\n}   \r\n\r\n\r\nrouter.beforeEach((to,from,next)=>{\r\n    if(from === START_LOCATION){\r\n        const unsubscribe = onAuthStateChanged(auth, user => {\r\n            if(user){\r\n                store.dispatch('auth/autosign',user).then(()=>{\r\n                    validateCheck(to,from,next)\r\n                })\r\n            } else {\r\n                validateCheck(to,from,next)\r\n            }\r\n        })\r\n        unsubscribe();\r\n    } else {\r\n        validateCheck(to,from,next)\r\n    }    \r\n})\r\n\r\nexport default router;\r\n"],"mappings":"AAAA;AACA,SAASA,OAAO,EAAEC,kBAAkB,QAAO,eAAe;AAC1D,SAASC,YAAY,EAAEC,gBAAgB,EAAEC,cAAc,QAAQ,YAAY;AAC3E;AACA,OAAOC,IAAI,MAAM,6BAA6B;AAC9C,OAAOC,OAAO,MAAM,gCAAgC;AACpD,OAAOC,KAAK,MAAM,0BAA0B;AAE5C,MAAMC,MAAM,GAAGN,YAAY,CAAC;EAC1BO,OAAO,EAAEN,gBAAgB,EAAE;EAC3BO,MAAM,EAAE,CACN;IACEC,IAAI,EAAE,QAAQ;IACdC,SAAS,EAAEL,KAAK;IAChBM,IAAI,EAAE;EACR,CAAC,EACD;IACEF,IAAI,EAAE,GAAG;IACTC,SAAS,EAAEP,IAAI;IACfQ,IAAI,EAAE,MAAM;IACZC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAC7B,CAAC,EACD;IACEJ,IAAI,EAAE,UAAU;IAChBC,SAAS,EAAEN,OAAO;IAClBO,IAAI,EAAE,SAAS;IACfC,IAAI,EAAE;MAAEC,YAAY,EAAE;IAAK;EAC7B,CAAC;AAEL,CAAC,CAAC;AAEF,MAAMC,IAAI,GAAGhB,OAAO,EAAE;AAEtB,MAAMiB,aAAa,GAAGA,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,KAAK;EACpC,IAAIF,EAAE,CAACJ,IAAI,CAACO,IAAI,IAAI,CAACC,KAAK,CAACC,OAAO,CAAC,aAAa,CAAC,EAAC;IAC9CH,IAAI,CAAC,QAAQ,CAAC;EAClB,CAAC,MAAM,IAAIF,EAAE,CAACJ,IAAI,CAACU,MAAM,IAAIF,KAAK,CAACC,OAAO,CAAC,aAAa,CAAC,EAAC;IACtDH,IAAI,CAAC,GAAG,CAAC;EACb,CAAC,MAAK;IACFA,IAAI,EAAE;EACV;AACJ,CAAC;AAGDZ,MAAM,CAACiB,UAAU,CAAC,CAACP,EAAE,EAACC,IAAI,EAACC,IAAI,KAAG;EAC9B,IAAGD,IAAI,KAAKf,cAAc,EAAC;IACvB,MAAMsB,WAAW,GAAGzB,kBAAkB,CAACe,IAAI,EAAEW,IAAI,IAAI;MACjD,IAAGA,IAAI,EAAC;QACJL,KAAK,CAACM,QAAQ,CAAC,eAAe,EAACD,IAAI,CAAC,CAACE,IAAI,CAAC,MAAI;UAC1CZ,aAAa,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,CAAC;QAC/B,CAAC,CAAC;MACN,CAAC,MAAM;QACHH,aAAa,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,CAAC;MAC/B;IACJ,CAAC,CAAC;IACFM,WAAW,EAAE;EACjB,CAAC,MAAM;IACHT,aAAa,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,CAAC;EAC/B;AACJ,CAAC,CAAC;AAEF,eAAeZ,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}